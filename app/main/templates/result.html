{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}

{% block title %}{{title}}{% endblock %}

{% block app_content %}
    <h3 class="text-center pt-2">Available reports for DICOM Series</h3></br>
    <table class="table table-striped"> <!-- Series information -->
        <tr>
            <th>Series description</th>
            <td>{{ series.description }}</td>
        </tr>
        <tr>
            <th>Acquisition date</th>
            <td>{{ series.series_datetime }}</td>
        </tr>
        <tr>
            <th>Uploaded date</th>
            <td>{{ series.created_at.format('YYYY-MM-DD HH:mm') }}</td>
        </tr>
        <tr>
            <th>Files in series</th>
            <td>{{ series.series_files }}</td>
        </tr>
        <tr>
            <th>Reports made</th>
            <td>{{ series.has_report }}</td>
        </tr>
    </table>
    </br>

    <h2 class="text-center pt-2">Results</h2>
    {% for task, data in results.items()%}
        <p style="font-size:120%">Measurement results for <b>{{ task }}</b>, created at {{ data.created.format('YYYY-MM-DD HH:mm') }}</p>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Measurement</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <!-- Display measurement values for results per task performed on series -->
                {% for measurement, value in data.measurement.items() %}
                    <tr>
                        <td>{{ measurement }}</td>
                        <td>{{ value }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
        <div>
            {% for img_name in data.image_files %}
                <img src="/static//{{data.directory}}/{{img_name}}" width="{{data.width}}%" height="50%">
            {% endfor %}
        </div>
    
    {% endfor %}

{% endblock %}
