{% extends "base.html" %}
{% import "bootstrap5/form.html" as wtf %}

{% block app_content %}
    {% if pending %}
        <table class="table table-striped"></table>
    {% endif %}

    {% if not reports %}
        <h3>Generate reports</h3>
        {% if form %}
            {{ wtf.render_form(form) }}
            <br>
        {% endif %}

    {% else %}
        {% for report in reports %}
            <table class="table table-striped">

                <caption>
                    Status: {{ report.status }}<br>
                    Task: {{ report.task.name }}<br>
                    Variables: {{ report.process_task_variables }}<br>
                    Created: {{ moment(report.created_at.naive).fromNow() }}<br>
                </caption>

                <thead>
                    <tr>
                        <th>Measurement</th>
                        <th>Value</th>
                    </tr>
                </thead>

                <tbody>
                    {% for key, value in report.data.items() %}
                        {% for key, value in value.items() %}
                            <tr>
                                <td>{{ key }}</td>
                                <td>{{ value }}</td>
                            </tr>
                        {% endfor %}
                    {% endfor %}
                </tbody>

            </table>

        {% endfor %}

    {% endif %}

{%  endblock %}